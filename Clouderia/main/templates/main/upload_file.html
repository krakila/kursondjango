{% extends 'base.html' %}

{% block content %}
<h2>Upload File or Folder</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="form-group">
        <label for="id_title">Title</label>
        {{ form.title }}
    </div>

    <div class="form-group">
        <label for="id_description">Description</label>
        {{ form.description }}
    </div>

    <div class="form-group">
        <label for="fileInput">Select File</label>
        <input type="file" name="files" id="fileInput" multiple required disabled>
    </div>

    <div class="form-group">
        <label for="folderInput">Select Folder</label>
        <input type="file" name="files" id="folderInput" webkitdirectory multiple required disabled>
    </div>


    <div class="form-group">
        <label for="uploadType">Upload Type</label>
        <select name="upload_type" id="uploadType">
            <option value="file">File</option>
            <option value="folder">Folder</option>
        </select>
    </div>

    <button type="submit" class="btn btn-success">Upload</button>
</form>

<script>
    const fileInput = document.getElementById('fileInput');
    const folderInput = document.getElementById('folderInput');
    const uploadType = document.getElementById('uploadType');

    // Enable/disable file and folder input based on upload type
    uploadType.addEventListener('change', function() {
        if (this.value === 'file') {
            fileInput.disabled = false;
            folderInput.disabled = true;
        } else if (this.value === 'folder') {
            folderInput.disabled = false;
            fileInput.disabled = true;
        }
    });

    // Default to file input being enabled when the page loads
    uploadType.dispatchEvent(new Event('change'));
</script>
{% endblock %}
